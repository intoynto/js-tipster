{"version":3,"file":"tipster.js","mappings":"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","sources":["webpack://tipster/webpack/universalModuleDefinition","webpack://tipster/./src/hooks.tsx","webpack://tipster/./src/index.tsx","webpack://tipster/./src/tipster.tsx","webpack://tipster/./src/types.ts","webpack://tipster/./src/utils.ts","webpack://tipster/external umd \"react\"","webpack://tipster/external umd \"react-dom\"","webpack://tipster/webpack/bootstrap","webpack://tipster/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"tipster\", [\"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tipster\"] = factory(require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"tipster\"] = factory(root[\"react\"], root[\"react-dom\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__156__, __WEBPACK_EXTERNAL_MODULE__111__) {\nreturn ","import {useEffect,RefObject,useLayoutEffect} from \"react\";\r\n\r\nexport function useOnEscape(handler:()=>void,active=true){\r\n    useEffect(()=>{\r\n        if(!active) return;\r\n        const listener=(event:any)=>{\r\n            if(event.key==='Escape') handler();\r\n        };\r\n        document.addEventListener('keyup',listener);\r\n        return ()=>{\r\n            if(!active) return;\r\n            document.removeEventListener('keyup',listener)\r\n        };\r\n    },[handler,active]);\r\n}\r\n\r\nexport function useRepositionOnResize(handler:()=>void,active=true)\r\n{\r\n    useEffect(()=>{\r\n        if (!active) return;\r\n        const listener=()=>{\r\n            handler();\r\n        };\r\n        window.addEventListener('resize',listener);\r\n        return () => {\r\n            if (!active) return;\r\n            window.removeEventListener('resize',listener);\r\n        };\r\n  },[handler,active]);\r\n}\r\n\r\nexport function useOnClickOutside(\r\n    ref: RefObject<HTMLElement>|RefObject<HTMLElement>[],\r\n    handler:()=>void,\r\n    active=true)\r\n{\r\n    useEffect(()=>{\r\n        if (!active) return;\r\n        const listener = (event: any) => {\r\n            // Do nothing if clicking ref's element or descendent elements\r\n            const refs = Array.isArray(ref) ? ref : [ref];\r\n            let contains = false;\r\n            refs.forEach(r =>{\r\n                if (!r.current || r.current.contains(event.target)) {\r\n                    contains = true;\r\n                    return;\r\n                }\r\n            });\r\n            event.stopPropagation();\r\n            if (!contains) handler();\r\n        };\r\n        document.addEventListener('mousedown', listener);\r\n        document.addEventListener('touchstart', listener);\r\n        return ()=>{\r\n            if (!active) return;\r\n            document.removeEventListener('mousedown', listener);\r\n            document.removeEventListener('touchstart', listener);\r\n        };\r\n    },[ref, handler, active]);\r\n}\r\n\r\nexport function useTabbing(\r\n    contentRef: RefObject<HTMLElement>,\r\n    active = true\r\n)\r\n{\r\n    useEffect(() => \r\n    {\r\n        if (!active) return;\r\n        const listener = (event: any) => {\r\n            // check if key is an Tab\r\n            if (event.keyCode === 9) {\r\n                const els = contentRef?.current?.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex=\"0\"]');\r\n                const focusableEls = Array.prototype.slice.call(els);\r\n                if (focusableEls.length === 1){\r\n                    event.preventDefault();\r\n                    return;\r\n                }\r\n                const firstFocusableEl = focusableEls[0];\r\n                const lastFocusableEl = focusableEls[focusableEls.length - 1];\r\n                if (event.shiftKey && document.activeElement === firstFocusableEl)\r\n                {\r\n                    event.preventDefault();\r\n                    lastFocusableEl.focus();\r\n                } \r\n                else if (document.activeElement === lastFocusableEl)\r\n                {\r\n                    event.preventDefault();\r\n                    firstFocusableEl.focus();\r\n                }\r\n            }\r\n        };\r\n\r\n        document.addEventListener('keydown', listener);\r\n        return () => {\r\n            if (!active) return;\r\n            document.removeEventListener('keydown', listener);\r\n        };\r\n        \r\n    },[contentRef, active]);\r\n}\r\n\r\nexport const useIsomorphicLayoutEffect=typeof window!==undefined?useLayoutEffect:useEffect;","import React from \"react\";\r\nimport Tipster from \"./tipster\";\r\n\r\nexport default Tipster;","import React,{useState,useRef,useEffect,forwardRef,useImperativeHandle} from \"react\";\r\nimport {createPortal} from \"react-dom\";\r\nimport {PopupProps,PopupActions,defaults} from \"./types\";\r\nimport {\r\n    useOnEscape,\r\n    useRepositionOnResize,\r\n    useOnClickOutside,\r\n    useTabbing,\r\n    useIsomorphicLayoutEffect\r\n} from \"./hooks\";\r\n\r\nimport calculatePosition from \"./utils\";\r\n\r\nfunction getRootTipster(){\r\n    let tips=document.getElementById('tipster-root');\r\n    if(tips===null)\r\n    {\r\n        tips=document.createElement('div');\r\n        tips.setAttribute('id','tipster-root');\r\n        document.body.appendChild(tips);\r\n    }\r\n    return tips;\r\n}\r\n\r\n\r\nlet tipsterCounterId=0;\r\n\r\nconst Tipster=forwardRef<PopupActions,PopupProps>((\r\n    {\r\n        trigger=null,\r\n\r\n        defaultOpen=false,\r\n        open=undefined,\r\n        disabled=false,\r\n        nested=false,\r\n\r\n        delayMouseEnter=100,\r\n        delayMouseLeave=100,\r\n\r\n        on=['click'],\r\n\r\n        modal=false,\r\n        arrow=true,\r\n\r\n        offsetX=0,\r\n        offsetY=0,\r\n\r\n        keepTooltipInside=false,\r\n        position='top left',\r\n\r\n        closeOnDocumentClick=true,\r\n        repositionOnResize=true,\r\n        closeOnEscape=true,\r\n\r\n        onOpen=()=>{},\r\n        onClose=()=>{},\r\n\r\n        styleArrow={},\r\n\r\n        children,      \r\n        ...props  \r\n    },ref\r\n)=>{\r\n\r\n    const [isOpen,setIsOpen]=useState<boolean>(open || defaultOpen);\r\n    const triggerRef=useRef<HTMLElement>(null);\r\n    const contentRef=useRef<HTMLElement>(null);\r\n    const arrowRef=useRef<HTMLElement>(null);\r\n    const focusedBeforeOpen=useRef<Element | null>(null);\r\n    const popupId=useRef<string>(`tipster-${++tipsterCounterId}`);\r\n\r\n    const isModal=modal?true:!trigger;\r\n    const timeOut=useRef<any>(0);\r\n    const resizeObserver=new ResizeObserver(entries=>{\r\n        setPosition();\r\n    });\r\n\r\n    useIsomorphicLayoutEffect(()=>{\r\n        if(isOpen)\r\n        {                 \r\n            focusedBeforeOpen.current=document.activeElement;\r\n            //setPosition()\r\n            //focusContentOnOpen(); // for akses\r\n            //lockSrcoll(); //\r\n            resizeObserver.observe(contentRef.current as Element);\r\n        }\r\n        else {\r\n            //resetScroll();\r\n        }\r\n\r\n        return ()=>{\r\n            clearTimeout(timeOut.current);\r\n        };\r\n    },[isOpen]);\r\n\r\n    useEffect(()=>{\r\n        if(typeof open===\"boolean\")\r\n        {\r\n            if(open) doPopupOpen();\r\n            else doPopupClose();\r\n        }\r\n    },[isOpen,disabled]);\r\n\r\n    function doPopupOpen()\r\n    {    \r\n        if(isOpen || disabled) return;\r\n        setIsOpen(true);\r\n        setTimeout(onOpen,0);\r\n    }\r\n\r\n    function doPopupClose(){       \r\n        if(!isOpen || disabled) return;\r\n        setIsOpen(false);\r\n        //if ismoda\r\n        setTimeout(onClose,0);\r\n    }\r\n\r\n    function togglePopup(event?:React.SyntheticEvent){\r\n        event?.stopPropagation();\r\n        if(!isOpen) doPopupOpen();\r\n        else doPopupClose();\r\n    }\r\n\r\n    function onMouseEnter(){        \r\n        clearTimeout(timeOut.current);\r\n        timeOut.current=setTimeout(doPopupOpen,delayMouseEnter);\r\n    }\r\n\r\n    function onMouseLeave()\r\n    {        \r\n        clearTimeout(timeOut.current);\r\n        timeOut.current=setTimeout(doPopupClose,delayMouseLeave);\r\n    }\r\n\r\n    function onContextMenu(event?:React.SyntheticEvent)\r\n    {\r\n        event?.preventDefault();\r\n        togglePopup();\r\n    }\r\n\r\n    function scrollLock()\r\n    {\r\n        //if (isModal && lockScroll)\r\n        //document.getElementsByTagName('body')[0].style.overflow = 'hidden'; // migrate to document.body\r\n    }\r\n\r\n    function scrollReset()\r\n    {\r\n        //if (isModal && lockScroll) document.getElementsByTagName('body')[0].style.overflow = 'auto';\r\n    }\r\n\r\n    function focusContentOnOpen()\r\n    {\r\n        const focusableEls = contentRef?.current?.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex=\"0\"]');\r\n        const firstEl = Array.prototype.slice.call(focusableEls)[0];\r\n        firstEl?.focus();\r\n    }\r\n\r\n    useImperativeHandle(ref,()=>({\r\n        open:()=>{\r\n            doPopupOpen();\r\n        },\r\n        close:()=>{\r\n            doPopupClose();\r\n        },\r\n        toggle:()=>{\r\n            togglePopup();\r\n        }\r\n    }));\r\n\r\n\r\n    function setPosition()\r\n    {\r\n        if(isModal || !isOpen) return;\r\n\r\n        if(!triggerRef?.current || !contentRef.current)\r\n        {\r\n            return; // error ref tidak diketahui\r\n        }\r\n\r\n        const trigger=triggerRef.current.getBoundingClientRect();\r\n        const content=contentRef.current.getBoundingClientRect();\r\n\r\n        const cords=calculatePosition(\r\n            trigger,\r\n            content,\r\n            position,\r\n            arrow,\r\n            {offsetX,offsetY},\r\n            keepTooltipInside\r\n        );        \r\n        contentRef.current.style.top = `${cords.top + window.scrollY}px`;\r\n        contentRef.current.style.left = `${cords.left + window.scrollX}px`;\r\n        if (arrow && !!arrowRef.current) {\r\n            arrowRef.current.style.transform = cords.transform;\r\n            arrowRef.current.style.setProperty('-ms-transform', cords.transform);\r\n            arrowRef.current.style.setProperty('-webkit-transform',cords.transform);\r\n            arrowRef.current.style.top =styleArrow.top?.toString() || cords.arrowTop;\r\n            arrowRef.current.style.left=styleArrow.left?.toString() || cords.arrowLeft;\r\n        }        \r\n    }\r\n    \r\n    useOnEscape(doPopupClose,closeOnEscape);\r\n    useTabbing(contentRef,isOpen && isModal);\r\n    useRepositionOnResize(setPosition,repositionOnResize);\r\n    useOnClickOutside(\r\n        !!trigger?[contentRef,triggerRef]:[contentRef],\r\n        doPopupClose,\r\n        closeOnDocumentClick && !nested\r\n    );\r\n\r\n    \r\n\r\n    function renderTrigger()\r\n    {\r\n        const triggerProps:any={\r\n            key:'T',\r\n            ref:triggerRef,\r\n            'aria-describedy':popupId.current,\r\n        };\r\n\r\n        const onAsArray=Array.isArray(on)?on:[on];\r\n        for(let i=0, len=onAsArray.length; i<len; i++)\r\n        {\r\n            switch(onAsArray[i])\r\n            {\r\n                case 'click':{\r\n                    triggerProps.onClick=togglePopup;\r\n                    break;\r\n                }\r\n                case 'right-click':{\r\n                    triggerProps.onContextMenu=onContextMenu;\r\n                    break;\r\n                }\r\n                case 'hover':{\r\n                    triggerProps.onMouseEnter=onMouseEnter;\r\n                    triggerProps.onMouseLeave=onMouseLeave;\r\n                    break;\r\n                }\r\n                case 'focus':{\r\n                    triggerProps.onFocus=onMouseEnter;\r\n                    triggerProps.onBlur=onMouseLeave;\r\n                    break;\r\n                }\r\n                default:\r\n            }\r\n        }\r\n\r\n        if(typeof trigger==='function')\r\n        {\r\n            const comp=trigger(isOpen);\r\n            return !!trigger && React.cloneElement(comp,triggerProps);\r\n        }\r\n\r\n        return !!trigger && React.cloneElement(trigger,triggerProps);\r\n    }\r\n\r\n    function addWarperAction()\r\n    {\r\n        //const popupContentStyle=isModal?StyleSheet.popupContent.modal:styles.popupContent.tooltip;\r\n    }\r\n\r\n    function renderContent()\r\n    {\r\n        const mProps:any={\r\n            ref:contentRef,\r\n            onClick:(e:MouseEvent)=>{\r\n                e.stopPropagation();\r\n            },\r\n        };\r\n        const idnProps:any={\r\n            ref:arrowRef,\r\n        }\r\n        return (\r\n            <div\r\n                key=\"C\"\r\n                id={popupId.current}\r\n                className={`${defaults.classDiv} ${props.className?\" \"+props.className:\"\"}`}\r\n                role={isModal?'tipster-dialog':'tipster-tooltip'}\r\n\r\n                style={{\r\n                    pointerEvents:\"auto\",\r\n                    ...props.style\r\n                }}\r\n\r\n                {...mProps}\r\n            >\r\n                {arrow && !isModal && \r\n                <div {...idnProps} className={`${defaults.classArrow}${props.classArrow?\" \"+props.classArrow:\"\"}`}>\r\n                    <svg\r\n                        data-testid=\"arrow\"\r\n                        viewBox=\"0 0 32 16\"\r\n                    >                      \r\n                        <path d=\"M16 0l16 16H0z\" fill=\"currentcolor\" />\r\n                    </svg>\r\n                </div>\r\n                }\r\n                <div className={`${defaults.classContent}${props.classContent?\" \"+props.classContent:\"\"}`}>\r\n                    {children && typeof children===\"function\"\r\n                    ?children(doPopupClose,isOpen)\r\n                    :children\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    };\r\n\r\n\r\n    if(!isOpen && contentRef.current)\r\n    {\r\n        resizeObserver.unobserve(contentRef.current as Element);\r\n    }\r\n\r\n    const content=[        \r\n        !isModal && renderContent(),\r\n    ];\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {renderTrigger()}            \r\n            {isOpen && createPortal(content,getRootTipster())}\r\n        </React.Fragment>\r\n    )\r\n});\r\n\r\nexport default Tipster","import React from \"react\";\r\n\r\nexport const defaults={\r\n    classDiv:'tipster',\r\n    classContent:'tipster-content',\r\n    classArrow:'tipster-arrow',\r\n};\r\n\r\nexport type EventType='hover'|'click'|'focus'|'right-click';\r\n\r\nexport type PopupPosition =\r\n  | 'top left'\r\n  | 'top center'\r\n  | 'top right'\r\n  | 'right top'\r\n  | 'right center'\r\n  | 'right bottom'\r\n  | 'bottom left'\r\n  | 'bottom center'\r\n  | 'bottom right'\r\n  | 'left top'\r\n  | 'left center'\r\n  | 'left bottom'\r\n  | 'center center'\r\n;\r\n\r\nexport type PopupActions = {\r\n    open:()=>void;\r\n    close:()=>void;\r\n    toggle:()=>void\r\n};\r\n\r\nexport interface PopupProps {\r\n    trigger?:JSX.Element | ((isOpen:boolean)=>JSX.Element);\r\n    open?:boolean;\r\n    defaultOpen?:boolean;\r\n    disabled?:boolean\r\n    nested?:boolean\r\n\r\n    delayMouseEnter?:number\r\n    delayMouseLeave?:number\r\n\r\n    onOpen?:()=>any\r\n    onClose?:()=>any\r\n\r\n    on?:EventType | EventType[]\r\n\r\n    modal?:boolean\r\n    arrow?:boolean\r\n    offsetX?:number\r\n    offsetY?:number\r\n    position?:PopupPosition | PopupPosition[]\r\n\r\n    keepTooltipInside?:boolean\r\n    closeOnEscape?:boolean\r\n    closeOnDocumentClick?:boolean\r\n    repositionOnResize?:boolean\r\n\r\n    className?:string\r\n    classArrow?:string\r\n    classContent?:string\r\n\r\n    style?:React.CSSProperties\r\n    styleArrow?:React.CSSProperties\r\n\r\n    children:React.ReactNode;\r\n}","import {PopupPosition} from \"./types\";\r\n\r\nexport const POSITION_TYPES:PopupPosition[]=[\r\n    'top left',\r\n    'top center',\r\n    'top right',\r\n    'right top',\r\n    'right center',\r\n    'right bottom',\r\n    'bottom left',\r\n    'bottom center',\r\n    'bottom right',\r\n    'left top',\r\n    'left center',\r\n    'left bottom',\r\n];\r\n\r\ntype CoordsType = {\r\n    top:number\r\n    left:number\r\n    transform:string\r\n    arrowLeft:string\r\n    arrowTop:string\r\n}\r\n\r\nfunction getCoordinatesForPosition(\r\n    boundingTrigger:DOMRect,\r\n    boundingContent:DOMRect,\r\n    position:PopupPosition,\r\n    arrow:boolean,\r\n    {offsetX,offsetY}:{offsetX:number,offsetY:number}\r\n):CoordsType\r\n{\r\n    const margin=arrow?8:0;\r\n    const args=position.split(' ');\r\n    // cari step n 1 : center teh popup content => ok\r\n    const CenterTop=boundingTrigger.top + boundingTrigger.height / 2;\r\n    const CenterLeft=boundingTrigger.left + boundingTrigger.width / 2;\r\n    const {height,width}=boundingContent;\r\n    let top=CenterTop - height / 2;\r\n    let left=CenterLeft - width / 2;\r\n    let transform='';\r\n    let arrowTop='0%';\r\n    let arrowLeft='0%';\r\n    //step n 2 : = > ok\r\n    switch(args[0])\r\n    {\r\n        case 'top':{\r\n            top-=height / 2 + boundingTrigger.height / 2 + margin;\r\n            transform=`rotate(180deg) translateX(50%)`;\r\n            arrowTop='100%';\r\n            arrowLeft='50%';\r\n            break;\r\n        }\r\n        case 'bottom':{\r\n            top+=height / 2 + boundingTrigger.height / 2 + margin;\r\n            transform=`rotate(0deg) translateY(-100%) translateX(-50%)`;\r\n            arrowLeft='50%';\r\n            break;            \r\n        }\r\n        case 'left':{\r\n            left-=width / 2 + boundingTrigger.width / 2 + margin;\r\n            transform=`rotate(90deg) translateY(50%) translateX(-25%)`;\r\n            arrowLeft='100%';\r\n            arrowTop='50%';\r\n            break;\r\n        }\r\n        case 'right':{\r\n            left+=width/2 + boundingTrigger.width / 2 + margin;\r\n            transform=`rotate(-90deg) translateY(-150%) translateX(25%)`;\r\n            arrowTop='50%';\r\n            break;\r\n        }\r\n        default :\r\n    }\r\n\r\n    switch(args[1])\r\n    {\r\n        case 'top':{\r\n            top=boundingTrigger.top;\r\n            arrowTop=`${boundingTrigger.height/2}px`;\r\n            break;\r\n        }\r\n        case 'bottom':{\r\n            top=boundingTrigger.top - height + boundingTrigger.height;\r\n            arrowTop=`${height - boundingTrigger.height /2}px`;\r\n            break;\r\n        }\r\n        case 'left':{\r\n            left=boundingTrigger.left;\r\n            arrowLeft=`${boundingTrigger.width/2}px`;\r\n            break;\r\n        }\r\n        case 'right':{\r\n            left=boundingTrigger.left - width + boundingTrigger.width;\r\n            arrowLeft=`${width - boundingTrigger.width/2}px`;\r\n            break;\r\n        }\r\n        default:\r\n    }\r\n\r\n    top=args[0]==='top'?top - offsetY:top+offsetY;\r\n    left=args[0]==='left'?left - offsetX : left + offsetX;\r\n    return {\r\n        top,\r\n        left,\r\n        transform,\r\n        arrowLeft,\r\n        arrowTop\r\n    };\r\n}\r\n\r\n\r\nfunction getTooltipBoundary(keepTooltipInside:string | boolean)\r\n{\r\n    let boundingBox={\r\n        top:0,\r\n        left:0,\r\n        width:window.innerWidth,\r\n        height:window.innerHeight,\r\n    };\r\n\r\n    if(typeof keepTooltipInside===\"string\")\r\n    {\r\n        const selector=document.querySelector(keepTooltipInside);\r\n        if(selector!==null){\r\n            boundingBox=selector?.getBoundingClientRect();\r\n        }\r\n    }\r\n    return boundingBox;\r\n}\r\n\r\nfunction calculatePosition(\r\n    boundingTrigger:DOMRect,\r\n    boundingContent:DOMRect,\r\n    position:PopupPosition | PopupPosition[],\r\n    arrow:boolean,\r\n    {offsetX,offsetY}:{offsetX:number,offsetY:number},\r\n    keepTooltipInside: string | boolean\r\n):CoordsType\r\n{\r\n    let bestCoords: CoordsType={\r\n        arrowLeft: '0%',\r\n        arrowTop: '0%',\r\n        left: 0,\r\n        top: 0,\r\n        transform: 'rotate(135deg)',\r\n    };\r\n\r\n    let i = 0;\r\n    const wrapperBox = getTooltipBoundary(keepTooltipInside);\r\n    let positions = Array.isArray(position) ? position : [position];\r\n    \r\n    // keepTooltipInside would be activated if the  keepTooltipInside exist or the position is Array\r\n    if (keepTooltipInside || Array.isArray(position))\r\n    positions = [...positions, ...POSITION_TYPES];\r\n    \r\n    // add viewPort for WarpperBox\r\n    // wrapperBox.top = wrapperBox.top + window.scrollY;\r\n    // wrapperBox.left = wrapperBox.left + window.scrollX;\r\n    while (i < positions.length) \r\n    {\r\n        bestCoords = getCoordinatesForPosition(\r\n            boundingTrigger,\r\n            boundingContent,\r\n            positions[i],\r\n            arrow,\r\n            { offsetX, offsetY }\r\n        );\r\n        const contentBox = {\r\n            top: bestCoords.top,\r\n            left: bestCoords.left,\r\n            width: boundingContent.width,\r\n            height: boundingContent.height,\r\n        };\r\n        if (\r\n            contentBox.top <= wrapperBox.top ||\r\n            contentBox.left <= wrapperBox.left ||\r\n            contentBox.top + contentBox.height >=wrapperBox.top + wrapperBox.height ||\r\n            contentBox.left + contentBox.width >= wrapperBox.left + wrapperBox.width\r\n            ) \r\n            {\r\n                i++;\r\n            } \r\n        else {\r\n            break;\r\n        }\r\n    }// end while\r\n    return bestCoords;\r\n}\r\n\r\nexport {getTooltipBoundary}\r\nexport default calculatePosition;","module.exports = __WEBPACK_EXTERNAL_MODULE__156__;","module.exports = __WEBPACK_EXTERNAL_MODULE__111__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(976);\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__156__","__WEBPACK_EXTERNAL_MODULE__111__","handler","active","useEffect","listener","event","key","document","addEventListener","removeEventListener","window","ref","refs","Array","isArray","contains","forEach","r","current","target","stopPropagation","contentRef","keyCode","els","querySelectorAll","focusableEls","prototype","slice","call","length","preventDefault","firstFocusableEl","lastFocusableEl","shiftKey","activeElement","focus","useIsomorphicLayoutEffect","undefined","useLayoutEffect","tipsterCounterId","Tipster","forwardRef","trigger","defaultOpen","open","disabled","nested","delayMouseEnter","delayMouseLeave","on","modal","arrow","offsetX","offsetY","keepTooltipInside","position","closeOnDocumentClick","repositionOnResize","closeOnEscape","onOpen","onClose","styleArrow","children","props","useState","isOpen","setIsOpen","triggerRef","useRef","arrowRef","focusedBeforeOpen","popupId","isModal","timeOut","resizeObserver","ResizeObserver","entries","setPosition","doPopupOpen","setTimeout","doPopupClose","togglePopup","onMouseEnter","clearTimeout","onMouseLeave","onContextMenu","getBoundingClientRect","content","cords","style","top","scrollY","left","scrollX","transform","setProperty","toString","arrowTop","arrowLeft","observe","useImperativeHandle","close","toggle","useOnEscape","useTabbing","useRepositionOnResize","useOnClickOutside","unobserve","mProps","idnProps","tips","onClick","e","id","className","defaults","classDiv","role","pointerEvents","classArrow","viewBox","d","fill","classContent","Fragment","triggerProps","onAsArray","i","len","onFocus","onBlur","comp","cloneElement","renderTrigger","createPortal","getElementById","createElement","setAttribute","body","appendChild","getCoordinatesForPosition","boundingTrigger","boundingContent","margin","args","split","CenterTop","height","CenterLeft","width","getTooltipBoundary","boundingBox","innerWidth","innerHeight","selector","querySelector","POSITION_TYPES","bestCoords","wrapperBox","positions","contentBox","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}